:root {
  --bg: #1b100a;
  --panel: #5c3f26;
  --panel-dark: #4a311f;
  --text: #f4efe9;
  --accent: #ffd37a;
  --danger: #ff5a5a;
}

* { box-sizing: border-box; }
html, body { height: 100svh; overflow: hidden; }
body {
  margin: 0;
  background: #2e1b11;
  color: var(--text);
  font: 14px/1.4 -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
}

.page-bg { position: fixed; inset: 0; background-position: center; background-size: cover; opacity: .15; pointer-events: none; }

.app { min-height: 100svh; display: grid; grid-template-rows: 1fr; }

.hud {
  position: fixed; top: 8px; left: 0; right: 0;
  display: flex; gap: 16px; justify-content: center; z-index: 5; pointer-events: none;
}
.hud .score, .hud .timer {
  background: rgba(0,0,0,.35); border: 1px solid rgba(255,255,255,.15);
  padding: 6px 10px; border-radius: 999px; font-weight: 700; letter-spacing: .5px;
}
.hud .timer { color: #fff; }

.game { display: grid; place-items: center; height: 100svh; padding: 12px; }

.board {
  width: min(520px, 92vw, 82svh);
  max-height: 82svh;
  aspect-ratio: 1 / 1;
  background: radial-gradient(800px 600px at 50% 10%, #6a4a30, var(--panel));
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 12px;
  padding: 24px;
  display: grid;
  position: relative;
  grid-template-columns: repeat(3, 1fr);
  grid-auto-rows: 1fr;
  gap: 24px;
  box-shadow: 0 12px 30px rgba(0,0,0,.45) inset;
}

.board.shake { animation: board-shake .12s ease; }
@keyframes board-shake {
  0% { transform: translate(0,0); }
  25% { transform: translate(1px, -1px); }
  50% { transform: translate(-1px, 1px); }
  75% { transform: translate(1px, 0); }
  100% { transform: translate(0,0); }
}

.hole {
  position: relative; display: grid; place-items: end;
  aspect-ratio: 1 / 1;
}
.hole::before {
  content: ""; position: absolute; inset: 0; border-radius: 50%;
  background: radial-gradient(circle at 50% 45%, #000 0 55%, #000 60%),
              radial-gradient(circle at 50% 60%, rgba(0,0,0,.6), rgba(0,0,0,.9));
  box-shadow: 0 0 0 8px #8b5a35 inset, 0 0 0 14px #4b2f1c inset, 0 8px 16px rgba(0,0,0,.5);
}

.mole {
  position: absolute; bottom: 8%; left: 50%; transform: translateX(-50%) translateY(14%);
  width: 70%; aspect-ratio: 1/1; background-repeat: no-repeat; background-size: contain; background-position: center;
  transition: transform .12s ease-out, opacity .12s linear; pointer-events: auto; cursor: pointer;
  opacity: 0;
}
.mole.up { transform: translateX(-50%) translateY(0%); opacity: 1; animation: mole-pop .24s ease-out; }
.mole.hit { filter: brightness(.8) saturate(.9); transform: translateX(-50%) translateY(10%) scale(.95); }

@keyframes mole-pop {
  0% { transform: translateX(-50%) translateY(24%) scale(.87); opacity: 0; }
  60% { transform: translateX(-50%) translateY(-6%) scale(1.06); opacity: 1; }
  100% { transform: translateX(-50%) translateY(0%) scale(1); opacity: 1; }
}

.help { text-align: center; margin-top: 8px; color: #f0e6d8; opacity: .9; max-width: 92vw; }

.overlay {
  position: fixed; inset: 0; display: none; place-items: center; background: rgba(0,0,0,.6); z-index: 10;
}
.overlay.show { display: grid; }
.dialog { background: var(--panel-dark); padding: 18px 22px; border-radius: 12px; border: 1px solid rgba(255,255,255,.15); }

.no-interactions { pointer-events: none; }

/* Hammer */
.hammer {
  position: absolute;
  z-index: 6;
  width: 15.75%;
  left: 50%;
  top: calc(100% + 40px);
  transform: translate(-50%, 0) rotate(-18deg);
  /* pivot around lower-center (handle end midpoint) for a more natural swing */
  transform-origin: 50% 86%;
  pointer-events: none;
  transition: left .06s linear, top .06s linear, bottom .06s linear, transform .06s ease;
}
.hammer.hit { transform: translate(-50%, 0) rotate(-78deg); }

/* Impact pop */
.impact {
  position: absolute;
  width: 16%;
  aspect-ratio: 1 / 1;
  pointer-events: none;
  transform: translate(-50%, -50%) scale(.6);
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255,230,160,.95) 0 28%, rgba(255,160,70,.6) 36%, rgba(255,120,0,0) 70%);
  box-shadow: 0 0 0 2px rgba(255,200,120,.6), 0 0 18px rgba(255,160,70,.7);
  animation: impact-burst .24s ease-out forwards;
  z-index: 5;
}
@keyframes impact-burst {
  0% { opacity: 1; transform: translate(-50%, -50%) scale(.6); }
  60% { opacity: 1; transform: translate(-50%, -50%) scale(1.08); }
  100% { opacity: 0; transform: translate(-50%, -50%) scale(1.3); box-shadow: 0 0 0 0 rgba(0,0,0,0); }
}

/* Floating score */
.floating-score {
  position: absolute;
  transform: translate(-50%, -50%);
  color: #ffd37a;
  font-weight: 800;
  text-shadow: 0 2px 6px rgba(0,0,0,.6);
  pointer-events: none;
  z-index: 7;
  animation: float-up .6s ease-out forwards;
}
@keyframes float-up {
  0% { opacity: 0; transform: translate(-50%, -30%) scale(.9); }
  15% { opacity: 1; transform: translate(-50%, -60%) scale(1.0); }
  100% { opacity: 0; transform: translate(-50%, -120%) scale(1.05); }
}


